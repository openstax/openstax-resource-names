<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- spell-checker: ignore TFCS -->
    <meta charset="utf-8" />
    <title>OpenStax</title>
    <meta name="robots" content="noindex" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="theme-color" content="#000000" />
    <meta
      name="description"
      content="OpenStax"
    />
    <link rel="apple-touch-icon" href="%PUBLIC_URL%/logo192.png" />
    <!--
      manifest.json provides metadata used when your web app is installed on a
      user's mobile device or desktop. See https://developers.google.com/web/fundamentals/web-app-manifest/
    -->
    <link rel="manifest" href="%PUBLIC_URL%/manifest.json" />

    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag() {
        dataLayer.push(arguments);
      }
      gtag("consent", "default", {
        ad_storage: "denied",
        ad_user_data: "denied",
        ad_personalization: "denied",
        analytics_storage: "denied",
        functionality_storage: "denied",
        personalization_storage: "denied",
        security_storage: "granted",
        wait_for_update: 2000,
      });
      gtag("set", "ads_data_redaction", true);
      gtag("set", "url_passthrough", false);

      dataLayer.push({
        'os.release_id':'%REACT_APP_CODE_VERSION%',
        'os.app':'%REACT_APP_NAME%',
        'os.user':window._OX_USER_DATA,
      });

      document.addEventListener('cookieyes_banner_load', (eventData) => {
        const consentPreferences = window._OX_USER_DATA?.consent_preferences;
        if (consentPreferences) {
          // Accounts remembers some state
          // We always defer to Accounts in this case

          // Only call the CookieYes API if it doesn't match what's in Accounts
          let doUpdate = !eventData.detail.isUserActionCompleted;

          consentPreferences.accepted.forEach((accepted) => {
            // There is no "necessary" switch
            if (accepted !== 'necessary') {
              document.getElementById(`ckySwitch${accepted}`).checked = true;
              if (!eventData.detail.categories[accepted]) { doUpdate = true; }
            }
          });
          consentPreferences.rejected.forEach((rejected) => {
            document.getElementById(`ckySwitch${rejected}`).checked = false;
            if (eventData.detail.categories[rejected]) { doUpdate = true; }
          });
          if (doUpdate) { performBannerAction('accept_partial'); }
        }
      });
    </script>

    <!-- Google Tag Manager -->
    <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-W6N7PB');</script>
    <!-- End Google Tag Manager -->
    <!-- Start cookieyes banner -->
    <script id="cookieyes" type="text/javascript" src="https://cdn-cookieyes.com/client_data/7c03144a7ef8b7f646f1ce01/script.js"></script>
    <!-- End cookieyes banner -->
    <!-- Any new scripts must be placed after this point -->
  </head>
  <body>
    <!-- Google Tag Manager (noscript) -->
    <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-TFCS56G"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->
    <noscript>You need to enable JavaScript to run this app.</noscript>
    <main id="root"></main>
    <!--
      This HTML file is a template.
      If you open it directly in the browser, you will see an empty page.

      You can add web-fonts, meta tags, or analytics to this file.
      The build step will place the bundled scripts into the <body> tag.

      To begin the development, run `npm start` or `yarn start`.
      To create a production bundle, use `npm run build` or `yarn build`.
    -->
  </body>
</html>
